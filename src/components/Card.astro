---
import type { ImageMetadata } from 'astro';

import FormattedDate from '@/components/FormattedDate.astro';
import Image from '@/components/Image.astro';

interface Props {
  id: string;
  post: {
    title: string;
    description: string;
    pubDate: Date;
    heroImage?: ImageMetadata;
    tags?: string[];
  };
  link: string;
}

const { id, post, link } = Astro.props;
---

<a href={`${link}/${id}`} class="js-post-card bg-slate-400/[.1] p-4 rounded-2xl block" data-tags={post.tags?.join(',') || ''}>
  {post.heroImage && (
    <div class="relative">
      <Image
        src={post.heroImage}
        alt={post.title}
        class="rounded-2xl w-full"
        widths={[400, 600, 800]}
        sizes="(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw"
      />
      <FormattedDate
        date={post.pubDate}
        class="absolute top-0 right-0 inline-flex items-center rounded-full font-rubik border border-white/70 px-2.5 py-1.5 m-2.5 text-xs font-semibold text-white/80"
      />
    </div>
  )}
  {post.tags && post.tags.length > 0 && (
    <div class="flex flex-wrap gap-1.5 mt-4">
      {post.tags.map((tag) => (
        <span class="inline-flex items-center rounded-full font-rubik uppercase bg-zinc-300/50 px-2.5 py-1 text-xs font-medium text-zinc-600">
          {tag}
        </span>
      ))}
    </div>
  )}
  <h4 class="text-lg mt-2 font-rubik">{post.title}</h4>
  <p class="text-sm mt-2 font-rubik text-gray-500">{post.description}</p>
</a>
